# Моделирование водяного фильтра

На основе Unreal Engine 4 было реализована визуализация создания гранульного фильтра и
пропуска через него молекул воды.

Гранулы фильтра – шары с заданным диаметром и со случайным отклонением. Шары, падая под действием
гравитации, засыпаются в фильтр. 

Фильтр – процедурально создаваемый меш. При этом внутреняя часть фильтра видима, а внешняя прозрачна. Этот эффект достигается за счет расчета нормалей каждой вершины стенки фильтра.

![](/Content/793468648.png)

## Основные классы

- MasterMind – запускающий процесс генерации всех остальный объектов и единственный объект для размещения на уровне.
- Burrel – класс, генерирующий фильтр в виде мешей двух цилиндров.
- Balls – класс, генерирующий падающие шарики, имитирующие водяные
гранулы.

## Работа программы

При запуске уровня визуализируется только объект цилиндрического
фильтра с прозрачной передней стенкой и непрозрачной задней.

Далее, после нажатия кнопки “Space bar” на клавиатуре, сгенерируется
большое количество шаров над цилиндром и начнется их падение.

После очередного нажатия на клавишу “Space bar” происходит
“убирание” шаров, не находящихся внутри фильтра. Еще одно нажатие
заставляет исчезнуть и сам объект фильтра. 

![](/Content/525779.png)
